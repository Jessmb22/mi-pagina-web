<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Pr√≥xima Temporada - Fashion Trends</title>

  <!-- Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    :root { 
      --accent: #ffffff;
      --dark-bg: #121212; 
      --gray-bg: #1f1f1f; 
      --light-gray: #e0e0e0; 
      --text-light: #f5f5f5; 
      --text-muted: #b0b0b0;
      --highlight: #ff4d6d;
    }
    body { 
      padding-top: 70px; 
      font-family: 'Segoe UI', sans-serif; 
      background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 100%);
      color: var(--text-light);
    }
    .card { 
      background: var(--gray-bg); 
      color: var(--text-light); 
      border: none; 
      box-shadow: 0 4px 12px rgba(0,0,0,.6); 
    }
    .product-img { 
      height: 300px; 
      object-fit: cover; 
      border-radius: .25rem; 
    }
    .btn-primary { 
      background-color: var(--highlight); 
      border: 1px solid #ff6f85;
    }
    .btn-primary:hover { 
      background-color: #ff6f85; 
      border-color: #ff8aa2; 
    }
    .navbar { background-color: #121212 !important; }
    footer { color: var(--text-muted); padding: 1rem 0; border-top: 1px solid #333; margin-top: 2rem; }
    .list-group-item { background-color: #1a1a1a; color: var(--text-light); border: 1px solid #333; }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark shadow-sm">
    <div class="container">
      <a class="navbar-brand fw-bold text-white" href="index.html">Fashion Trends</a>
      <button class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto align-items-center">
          <li class="nav-item me-3"><a class="nav-link" href="index.html">Inicio</a></li>
          <li class="nav-item">
            <button class="btn btn-outline-light btn-sm" id="openCartBtn">
              üõí Carrito (<span id="cartCount">0</span>)
            </button>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container mt-4">
    <section id="producto-innovador" class="mt-5 text-center">
      <h2>Pr√≥xima Temporada - Ropa Destacada</h2>
      <p class="text-muted">Solo productos de ropa desde la API</p>

      <div class="row justify-content-center mt-4" id="newProductsRow">
        <!-- Productos de ropa aparecer√°n aqu√≠ -->
      </div>

      <div id="apiError" class="mt-3 text-center" style="display:none;color:#ff6f85;">
        No se pudieron cargar los productos de ropa de la API. Mostrando productos locales.
      </div>
    </section>
  </main>

  <footer class="text-center mt-4">
    <p>&copy; 2025 Fashion Trends. Todos los derechos reservados.</p>
    <p>Autores: Azareel Linnette Pineda D√≠az, Ivanna Aguilar Navarrete y Sabrina De Persiis</p>
  </footer>

  <!-- Modal carrito -->
  <div class="modal fade" id="cartModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Tu Carrito de Compras</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <ul id="cartItems" class="list-group"></ul>
        </div>
        <div class="modal-footer">
          <a href="carrito.html" class="btn btn-secondary">Ir al Carrito Completo</a>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Seguir comprando</button>
        </div>
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Carrito compartido
      let cart = JSON.parse(localStorage.getItem('cart')) || [];
      const cartCountEl = document.getElementById('cartCount');
      const cartItemsEl = document.getElementById('cartItems');
      const cartModalEl = document.getElementById('cartModal');
      const cartModal = new bootstrap.Modal(cartModalEl);
      const openCartBtn = document.getElementById('openCartBtn');

      function updateCartCount() { cartCountEl.textContent = cart.length; }
      function renderCartList() {
        cartItemsEl.innerHTML = '';
        if (cart.length === 0) {
          cartItemsEl.innerHTML = '<li class="list-group-item">El carrito est√° vac√≠o</li>';
          return;
        }
        cart.forEach(item => {
          const li = document.createElement('li');
          li.className = 'list-group-item d-flex justify-content-between align-items-center';
          li.innerHTML = `<span>${item.title}</span><strong>${item.price}</strong>`;
          cartItemsElem.appendChild(li);
        });
      }

      openCartBtn.addEventListener('click', () => { renderCartList(); cartModal.show(); });
      updateCartCount();

      // Endpoint de ropa: categor√≠a mujeres y hombres
      const apiClothingUrl = "https://fakestoreapi.com/products/category/men's clothing"; 
      // Podr√≠as tambi√©n usar: "/products/category/women's clothing" o combinar ambos

      fetch(apiClothingUrl)
        .then(res => {
          if (!res.ok) throw new Error('Error en la API ropa');
          return res.json();
        })
        .then(products => {
          renderProducts(products);
        })
        .catch(err => {
          console.error('API error ropa:', err);
          document.getElementById('apiError').style.display = 'block';
          // fallback si quieres
          // fetch('productos.json')...
        });

      function renderProducts(products) {
        const newProductsRow = document.getElementById('newProductsRow');
        newProductsRow.innerHTML = '';
        products.forEach(prod => {
          const col = document.createElement('div');
          col.className = 'col-md-4 mb-4';
          col.innerHTML = `
            <div class="card h-100">
              <img src="${prod.image}" class="card-img-top product-img" alt="${prod.title}">
              <div class="card-body text-center">
                <h5 class="card-title">${prod.title}</h5>
                <p class="card-text small">${prod.category}</p>
                <p class="card-text">$${prod.price}</p>
                <button class="btn btn-primary btn-sm add-api-btn">Agregar</button>
              </div>
            </div>
          `;
          newProductsRow.appendChild(col);

          col.querySelector('.add-api-btn').addEventListener('click', () => {
            cart.push({ title: prod.title, price: `$${prod.price}` });
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            renderCartList();
            cartModal.show();
          });
        });
      }
    });
  </script>
</body>
</html>
